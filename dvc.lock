schema: '2.0'
stages:
  create_vectorisers:
    cmd: python3 src/create_vectorisers.py data/data.csv models
    deps:
    - path: data/data.csv
      md5: 9c19566de548ab610a6cfa78e3aa0121
      size: 1657534
    - path: src/create_vectorisers.py
      md5: d741611469d7bf5c55d63e2ed2f25ad1
      size: 1112
    params:
      params.yaml:
        create_vectorisers.city_vct_name: city_vectoriser
        create_vectorisers.city_vct_num: 40
        create_vectorisers.seed: 20170428
        create_vectorisers.team_vct_name: team_vectoriser
    outs:
    - path: models
      md5: 6d214ce7ab969cde62519546917a8166.dir
      size: 780
      nfiles: 2
  prepare:
    cmd: python3 src/prepare.py models/city_vectoriser models/team_vectoriser data/data.csv
    deps:
    - path: data/data.csv
      md5: 9c19566de548ab610a6cfa78e3aa0121
      size: 1657534
    - path: models/city_vectoriser
      md5: 3ea213c89300372a58a1eb7b27e470fc
      size: 390
    - path: models/team_vectoriser
      md5: ffb9340e46f5550ba39f8c6830f05114
      size: 390
    - path: src/prepare.py
      md5: e61d6aea6534e0c86a7bc3eed295d2f7
      size: 4153
    params:
      params.yaml:
        prepare.seed: 20170428
        prepare.split: 0.3
    outs:
    - path: data/prepared
      md5: ff11ecf4964b54b3d58016360924542b.dir
      size: 6363599
      nfiles: 2
  train:
    cmd: python3 src/train.py data/prepared/train.csv model.pkl
    deps:
    - path: data/prepared/train.csv
      md5: 78fe6f51c633ee632bb350757e2c3359
      size: 4407547
    - path: src/train.py
      md5: bd518c4fb0c5b0c9a1a73974c82305b3
      size: 604
    params:
      params.yaml:
        train.seed: 20170428
    outs:
    - path: model.pkl
      md5: 65475268631fe5be85c9384d78fbcba2
      size: 3303
  evaluate:
    cmd: python3 src/evaluate.py data/prepared model.pkl
    deps:
    - path: data/prepared
      md5: ff11ecf4964b54b3d58016360924542b.dir
      size: 6363599
      nfiles: 2
    - path: model.pkl
      md5: 65475268631fe5be85c9384d78fbcba2
      size: 3303
    - path: src/evaluate.py
      md5: 3699b4159ea8f9eb1fa08862e34ee7c9
      size: 2136
    outs:
    - path: eval/live/metrics.json
      md5: 358fd5a0a2fe3b64cc0580f5d3a33508
      size: 136
    - path: eval/live/plots
      md5: db9fc2d2cceb56a535b2e973735ee435.dir
      size: 695781
      nfiles: 4
    - path: eval/prc
      md5: 76dc4bf9d12a747b75d0a8a5ff748a6b.dir
      size: 247309
      nfiles: 2
